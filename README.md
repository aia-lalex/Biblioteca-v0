# Tarea: Biblioteca IES Al-Ã�ndalus
## Profesor: JosÃ© RamÃ³n JimÃ©nez Reyes
## Alumno: Alejandro Hurtado Navarro

En el IES Al-Ã�ndalus, para fomentar la lectura, animan al alumnado a que se lea libros de la biblioteca y asÃ­ consiga puntos para la aplicaciÃ³n ClassDojo que al final de trimestre pueden repercutir en diversos premios. Los puntos obtenidos por el prÃ©stamo de cada libro dependerÃ¡n del nÃºmero de pÃ¡ginas del libro y del nÃºmero de dÃ­as que lo haya tenido prestado. DespuÃ©s de todas las especificaciones y requerimientos anotados, en este **primer spring** de la aplicaciÃ³n se ha decidido abarcar los siguientes:

- En la biblioteca del centro hay muchos libros impresos. Los **libros** se identifican por el **tÃ­tulo**, el **autor** y el **nÃºmero de pÃ¡ginas** de cada uno de ellos. SÃ³lo hay un ejemplar de cada libro. Se considera que dos libros son los mismos si tienen el mismo tÃ­tulo y autor. Una vez creado un libro no se puede cambiar ninguna de sus propiedades. Los puntos que se obtienen al realizar el prÃ©stamo de un libro dependen del nÃºmero de pÃ¡ginas del mismo. Obtendremos 0,5 puntos por cada 25 pÃ¡ginas del libro: de 0-24 obtenemos 0,5 puntos, de 25-49 obtenemos 1 puntos, de 50-74 obtenemos 1,5 puntos, etc. La aplicaciÃ³n permitirÃ¡ **insertar** un libro, **buscar** un libro, **borrar** un libro y **listar** todos los libros existentes.
- Un **alumno** se identifica por su **nombre** (que constarÃ¡ de al menos dos palabras correspondientes al nombre y un apellido), su **correo** electrÃ³nico (que debe ser correcto) y su **curso**. Una vez creado un alumno no podremos cambiarle ni el nombre, ni el correo electrÃ³nico pero si podremos cambiarle el curso. Se considera que dos alumnos son los mismos si su correo electrÃ³nico es el mismo. Para almacenar el nombre del alumno lo formatearemos eliminando espacios en blanco sobrantes y poniendo la primera letra de cada palabra en mayÃºsculas y las siguientes en minÃºsculas. Para mostrar un alumno, mostraremos su nombre, seguido de sus iniciales, su correo electrÃ³nico y su curso. La aplicaciÃ³n permitirÃ¡ **insertar** un alumno, **borrar** un alumno basÃ¡ndonos en el correo electrÃ³nico del mismo, **buscar** un alumno basÃ¡ndonos en el correo electrÃ³nico del mismo y **listar** los alumnos dados de alta.
- Un alumno puede realizar el **prÃ©stamo** de un libro en una fecha concreta. Permitimos que las **fechas de prÃ©stamo** sean pasadas ya que algunas veces no se registran en el instante y se registran con posterioridad. Un mismo alumno no podrÃ¡ realizar el prÃ©stamo de un libro mÃ¡s de una vez, por lo que consideramos dos prÃ©stamos iguales si el alumno y el libro son iguales. Una vez que el alumno se lee el libro, lo devolverÃ¡ y anotaremos la **fecha de devoluciÃ³n** que tambiÃ©n puede ser pasada (por el mismo motivo que para el prÃ©stamo), pero que si debe ser posterior a la fecha del prÃ©stamo. Por cada prÃ©stamo el alumno obtendrÃ¡ unos puntos que dependerÃ¡n del nÃºmero de pÃ¡ginas del libro, es decir, de los puntos que nos otorga haber realizado el prÃ©stamo de ese libro y del nÃºmero de dÃ­as que lo hemos tenido en nuestro poder. Si el nÃºmero de dÃ­as del prÃ©stamo supera el mÃ¡ximo de dÃ­as que es 20, no obtendremos ningÃºn punto. Si no los supera, obtendremos los puntos equivalentes a dividir el mÃ¡ximo de dÃ­as entre los puntos que nos otorga el libro multiplicado por el mÃ¡ximo de dÃ­as. Todo ello lo redondearemos y asÃ­ sabremos los puntos obtenidos por dicho prÃ©stamo. La aplicaciÃ³n permitirÃ¡ **realizar un prÃ©stamo** de un libro por un alumno, **devolver** un libro por un alumno, **buscar** un prÃ©stamo, **borrar** un prÃ©stamo, **listar todos** los prestamos, **listar** los prÃ©stamos de un **alumno dado**, **listar** los prÃ©stamos de **libro dado** y **listar** los prÃ©stamos realizados en un **mes dado** (dada una fecha).
- En este spring no contemplaremos ninguna restricciÃ³n mÃ¡s ni a la hora de insertar ni a la hora de borrar, por lo que se podrÃ¡n quedar datos inconsistentes que ya abarcaremos en el siguiente spring.


Tu tarea consiste en realizar una aplicaciÃ³n para gestionar los prÃ©stamos de la biblioteca del IES Al-Ã�ndalus. Con los conocimientos adquiridos hasta el momento realizaremos una implementaciÃ³n basada en arrays para gestionar las colecciones. Aplicaremos el patrÃ³n MVC (haciendo una primera aproximaciÃ³n al mismo que poco a poco iremos mejorando cuando adquiramos los conocimientos necesarios) por lo que haremos una distinciÃ³n entre la **vista** (encargada de interaccionar con el usuario), el **modelo** (encargado de gestionar los datos) que dividiremos entre clases de dominio (DTO) y clases de negocio (DAO) que nos permiten interactuar con las colecciones y el **controlador** (encargado de dirigir toda esta orquesta).

Debes tener en cuenta el problema existente con las referencias (aunque en principio no podamos modificar ninguno de los atributos de las clases expuestas -se consideran clases inmutables-, quiero que te acostumbres a tenerlo en cuenta). Por ello para cada clase que sea cliente de otra deberÃ¡s devolver referencias a objetos nuevos en los mÃ©todos de acceso y tambiÃ©n crear nuevas referencias a nuevos objetos cuando los vayamos a asignar a atributos. En los mÃ©todos de las clases de negocio tambiÃ©n deberÃ¡s devolver una copia profunda de los elementos de la colecciÃ³n en dicho mÃ©todo de acceso.

TambiÃ©n siempre se deben validar todos los valores que se intentan asignar y si no lanzar una excepciÃ³n adecuada para evitar inconsistencias en el estado de los objetos.

Para ello te pongo un diagrama de clases para el mismo y poco a poco te irÃ© explicando los diferentes pasos a realizar:

![Diagrama de clases para tutorias](src/main/resources/biblioteca.png)

He subido a GitHub un esqueleto de proyecto gradle que ya lleva incluidos todos los test necesarios que el programa debe pasar. Dichos test estÃ¡n todos comentados y deberÃ¡s ir descomentÃ¡ndolos conforme vayas avanzando con la tarea. La URL del repositorio es en la que te encuentras.

Por tanto, tu tarea va a consistir en completar los siguientes apartados:

1. Lo primero que debes hacer es realizar un **fork** del repositorio donde he colocado el proyecto gradle con la estructura del proyecto y todos los test necesarios. Clonar tu repositorio remoto reciÃ©n copiado en github a un repositorio local que serÃ¡ donde irÃ¡s realizando lo que a continuaciÃ³n se te pide. AÃ±ade tu nombre al fichero `README.md` en el apartado "Alumno". Realiza tu primer commit.
2. Crea el enumerado `Curso`, en el paquete adecuado con las siguientes instancias (`PRIMERO`, `SEGUNDO`, `TERCERO` y `CUARTO`). Cada instancia aceptarÃ¡ en su constructor el texto a mostrar por el mÃ©todo toString (1Âº ESO, 2Âº ESO, 3Âº ESO y 4Âº ESO).
3. Crea la clase `Alumno`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Crea el **constructor con parÃ¡metros** y el **constructor copia**. Crea los mÃ©todos `get` y `set` con la visibilidad adecuada. En todos los casos se debe comprobar la validez de los parÃ¡metros pasados antes de asignarlos y en caso de que no sean vÃ¡lidos lanzar la excepciÃ³n adecuada. Ten en cuenta los requisitos comentados al principio y recuerda formatear el nombre adecuadamente. El mÃ©todo `getAlumnoFicticio` simplemente devolverÃ¡ un alumno con un nombre vÃ¡lido y curso vÃ¡lido y el correo pasado por parÃ¡metro y que luego utilizaremos para las bÃºsquedas y los borrados. Crea los mÃ©todos `hashCode`, `equals` y `toString`. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
4. Crea la clase `Libro`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Crea el **constructor con parÃ¡metros** y el **constructor copia**. Crea los mÃ©todos `get` y `set` con la visibilidad adecuada. En todos los casos se debe comprobar la validez de los parÃ¡metros pasados antes de asignarlos y en caso de que no sean vÃ¡lidos lanzar la excepciÃ³n adecuada. Ten en cuenta los requisitos comentados al principio. El mÃ©todo `getLibroFicticio` simplemente devolverÃ¡ un profesor con un nÃºmero de pÃ¡ginas vÃ¡lido y el tÃ­tulo y autor pasados por parÃ¡metros y que luego utilizaremos para las bÃºsquedas y borrados. Crea los mÃ©todos `hashCode`, `equals` y `toString`. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
5. Crea la clase `Prestamo`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Crea el **constructor con parÃ¡metros** y el **constructor copia**. Crea los mÃ©todos `get` y `set` con la visibilidad adecuada. En todos los casos se debe comprobar la validez de los parÃ¡metros pasados antes de asignarlos y en caso de que no sean vÃ¡lidos lanzar la excepciÃ³n adecuada. Ten en cuenta los requisitos comentados al principio. El mÃ©todo `getPrestamoFicticio` simplemente devolverÃ¡ un prÃ©stamo con una fecha de prÃ©stamo vÃ¡lida y el alumno y libro ficticios correspondientes al correo, tÃ­tulo y autor pasados por parÃ¡metros. Crea los mÃ©todos `hashCode`, `equals` y `toString`. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
6. Crea la clase `Alumnos`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Recuerda que el mÃ©todo `get` devolverÃ¡ una copia profunda de la colecciÃ³n. Se permitirÃ¡ **insertar** elementos al final de la colecciÃ³n sin admitir repetidos, **buscar** y **borrar** desplazando los elementos hacia la izquierda para dejar el array compactado. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
7. Crea la clase `Libros`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Recuerda que el mÃ©todo `get` devolverÃ¡ una copia profunda de la colecciÃ³n. Se permitirÃ¡ **insertar** elementos al final de la colecciÃ³n sin admitir repetidos, **buscar** y **borrar** desplazando los elementos hacia la izquierda para dejar el array compactado. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
8. Crea la clase `Prestamos`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Recuerda que los mÃ©todos `get` devolverÃ¡n una copia profunda de la colecciÃ³n resultante. Se permitirÃ¡ **prestar**(insertar) elementos al final de la colecciÃ³n sin admitir repetidos, **devolver**, **buscar** y **borrar** desplazando los elementos hacia la izquierda para dejar el array compactado. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
9. Crea la clase `Modelo`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama y la visibilidad adecuada. Cada mÃ©todo deberÃ¡ hacer una llamada al mÃ©todo homÃ³logo del objeto adecuado. Asegurate de que se pasan todos los tests asociados a esta clase. Realiza el commit correspondiente.
10. Crea la clase `Consola`, en el paquete adecuado, teniendo en cuenta que serÃ¡ una clase de utilidades de la cual no queremos que se puedan instanciar objetos. Crea los mÃ©todos especificados en el diagrama, teniendo en cuenta que cada uno de los mÃ©todos realizarÃ¡ la funciÃ³n que su nombre indica, es decir, pedir por teclado las variables convenientes, que en algunos casos deberÃ¡ transformar como en el caso de las fechas, para poder devolver el objeto de dominio correspondiente. El mÃ©todo `mostrarCabecera` mostrarÃ¡ la cadena pasada por parÃ¡metro y debajo de la misma una cadena compuesta de tantos caracteres '-' como su longitud. Realiza el commit correspondiente.
11. Crea el enumerado `Opcion`, en el paquete adecuado, cuyas instancias corresponderÃ¡n con cada una de las opciones del menÃº de nuestra aplicaciÃ³n. Cada instancia aceptarÃ¡ en su constructor una cadena correspondiente al mensaje que se mostrarÃ¡ por pantalla para dicha opciÃ³n. Debes crear los atributos y mÃ©todos que se especifican en el diagrama, teniendo en cuenta que el mÃ©todo `ejecutar` es abstracto por lo que en la declaraciÃ³n general no tendrÃ¡ implementaciÃ³n, pero que deberÃ¡ ser implementado en cada una de las instancias haciendo una llamada al correspondiente mÃ©todo de la clase `Vista`. El mÃ©todo getOpcionSegunOrdinal devolverÃ¡ la instancia de Opcion que ocupe el ordinal pasado por parÃ¡metro. El mÃ©todo `esOrdinalValido` devolverÃ¡ un `boolean` indicando si el ordinal pasado por parÃ¡metro estÃ¡ dentro de los posibles ordinales. El mÃ©todo `toString` devolverÃ¡ la cadena correspondiente a la concatenaciÃ³n del ordinal de la opciÃ³n, la cadena " .- " y el mensaje a mostrar por la opciÃ³n en cuestiÃ³n. Por Ãºltimo, el mÃ©todo `setVista` asignarÃ¡ el valor pasado al atributo `vista`, que aunque aÃºn no exista, crearÃ¡s en el siguiente paso. Realiza el commit correspondiente.
12. Crea la clase `Vista`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama. Esta clase harÃ¡ uso de los mÃ©todos de la clase `Consola` para pedir los datos y llamarÃ¡ al mÃ©todo adecuado de la clase `Controlador`. El mÃ©todo `comenzar` serÃ¡ un bucle que mostrarÃ¡ el menÃº, pedirÃ¡ la opcion deseada y la ejecutarÃ¡, asÃ­ hasta que la opciÃ³n elegida sea `SALIR`. El mÃ©todo `terminar` simplemente llamarÃ¡ al mÃ©todo `terminar` de la clase `Controlador`. Realiza el commit correspondiente.
13. Crea la clase `Controlador`, en el paquete adecuado, con los atributos y mÃ©todos especificados en el diagrama. Esta clase asignarÃ¡ los valores a los atributos y llamarÃ¡ al mÃ©todo `setControlador` de la clase `Vista` para que dicha clase tenga una referencia a Ã©sta. El mÃ©todo `comenzar` llamarÃ¡ al mÃ©todo `comenzar` de la vista. Los demÃ¡s mÃ©todos llamarÃ¡n a sus mÃ©todos homÃ³logos de la clase `Modelo`. Realiza el commit correspondiente.
14. Crea la clase `MainApp` que simplemente crearÃ¡ un objeto de la clase `Modelo`, otro de la clase `Vista` y otro de la clase `Controlador` pasÃ¡ndole los dos anteriores y luego llamarÃ¡ al mÃ©todo `comenzar`. Realiza el commit correspondiente.


###### Se valorarÃ¡:
- La indentaciÃ³n debe ser correcta en todas las clases.
- El nombre de las variables debe ser adecuado.
- Se debe utilizar la clase `Entrada` para realizar la entrada por teclado.
- El proyecto debe pasar todas las pruebas que van en el esqueleto del mismo y toda entrada del programa serÃ¡ validada para evitar que el programa termine abruptamente debido a una excepciÃ³n.
- Se deben utilizar los comentarios adecuados.
- Se valorarÃ¡ la correcciÃ³n ortogrÃ¡fica tanto en los comentarios como en los mensajes que se muestren al usuario.

